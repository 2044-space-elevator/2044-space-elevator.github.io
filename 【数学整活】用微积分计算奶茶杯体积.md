#数学 #微积分
【2023/10/01】md，我的奶茶杯被我妈丢进垃圾桶了嘤嘤嘤。

> 本文章中的所有计算忽略了奶茶杯杯壁厚度、奶茶杯杯盖，以及底部凹进去的部分，所以实际操作会产生较大误差。


## 计算方法

奶茶杯一般长这样：

![1696131495665.png](https://img1.imgtp.com/2023/10/01/g1x5pObf.png)

大家应该可以想到这是一个近似圆柱体的物体，但是：

奶茶杯的壁是斜的，直接代入圆柱体计算公式会产生误差。

先设几个变量，如下：

![下载.png](https://img1.imgtp.com/2023/10/01/bJLmGq9k.png)

$c$ 为杯子**斜边**的长度，$b$ 为杯子底部直径，$a$ 为杯子顶部直径。

对于计算奶茶杯这种三维物体的体积，《普林斯顿微积分读本》给出了很好的方法说明，将语言简练一下，意思大概是：

> 对物体垂直于 $x$ 轴部分或 $y$ 轴部分进行切割，使每一个切片厚度无限接近于 $0$，用相应的函数计算每个切片的面积，然后对物体的上下部分作定积分。

有点抽象。举个例子，我们要计算圆柱体体积的公式，半径是 $r$，高度为 $h$。

先要寻找切片方法，垂直于 $x$ 轴切还是垂直于 $y$ 切？如何垂直于 $x$ 轴切（竖着切），我们会得到一堆怪异的长方形，这不便于计算。但沿着 $y$ 轴切，我们将得到面积相同的圆形，这就好算多了！

显然，在任意高度下，对于每一个切片，面积均为 $\pi r^2$，对物体上下部分积分，上限显然是 $h$，下限显然是 $0$，得到公式为：

$$
\int^h_0 \pi r^2 \mathrm{d}x
$$

移动常数项，得到：

$$
\pi r^2\int^h_0 1\mathrm{d}x
$$
然后由于 $\int^a_0 1\mathrm{d}x=a$，所以可以得到答案是：
$$
\frac{\pi r^3}{3}
$$
发现没，其实这就是圆柱体体积！

## 变量关系

那么计算奶茶杯其实也不难！（这里我们和切圆柱体一样，沿着 $y$ 轴切）虽然每个切片面积不同，但是面积是随着切片位置越来越高而逐渐变大的。所以我们现在主要要计算的是切片直径和切片高度的比值。**这其实就是一个构造一次函数的问题！**，为了避免变量混淆，这里使用 $y=kq+p$ 来表示一次函数。

奶茶杯最底部的切片，高度为 $0$，$y=b$，$q=0$。

奶茶杯最高部的切片，高度为 $c$，$y=a$，$q=c$。

不难想到，$p=a$，$k=\frac{(b-a)}{c}$。

所以，直径等于 $\frac{(b-a)x}{c}+a$（$x$ 表示当前切片高度）。那么当前切片面积为：
$$
\pi(\frac{\frac{(b-a)x}{c}+a}{2})^2
$$

## 积分

积分函数得出来了，所以体积就是：

$$
\int^c_0 \pi(\frac{\frac{(b-a)x}{c}+a}{2})^2\mathrm{d}x
$$

现在做的就是要认真的计算了，把常数项丢出去：

$$
\frac{\pi}{4}\int^c_0(\frac{(b-a)x}{c}+a)^2\mathrm{d}x
$$
然后就是大家最熟悉的完全平方公式啦：

$$
\frac{\pi}{4}(\int^c_0 (\frac{(b-a)^2x^2}{c^2}+\frac{2ax(b-a)}{c}+a^2)\mathrm{d}x)
$$
细胞分裂：

$$
\frac{\pi}{4}(\int^c_0\frac{(b-a)^2x^2}{c^2}\mathrm{d}x+\int^c_0\frac{2ax(b-a)}{c}\mathrm{d}x+\int^c_0a^2\mathrm{d}x)
$$
丢掉常数项：

$$
\frac{\pi}{4}(\frac{(b-a)^2}{c^2}\int^c_0x^2\mathrm{d}x+\frac{2a(b-a)}{c}\int^c_0x\mathrm{d}x+a^2c)
$$
然后代公式：
$$
\frac{\pi}{4}(\frac{(b-a)^2c^3}{3c^2}+\frac{a(b-a)c^2}{c}+a^2c)
$$

约分：
$$
\frac{\pi}{4}(\frac{(b-a)^2c}{3}+a(b-a)c+a^2c)
$$
里边通分：

$$
\frac{\pi}{4}(\frac{(b-a)^2c+3ac(b-a)+3a^2c}{3})
$$
乘过去：
$$
\frac{\pi(b-a)^2c+3\pi ac(b-a)+3\pi a^2c}{12}
$$
乘法分配律一下然后化简：

$$
\frac{\pi c((b-a)^2+3a(b-a)+3a^2)}{12}
$$
内部展开：

$$
\frac{\pi c(b^2-2ab+a^2+3ab)}{12}
$$
得到：
$$
\frac{\pi c(a^2+ab+b^2)}{12}
$$

另外，我将原积分式子代入 `WolframeAlpha` 计算，得到的式子是：

$$
\frac{\pi c(a^2+ab+b^2)}{12}
$$
答案是正确的！

## C++ 代码

依次输入 $a,b,c$ 的值，可以求出体积，代码如下：

```cpp
#include <iostream>
#define int double
using namespace std;

signed main() {
    int pi = 3.14;
    int a, b, c;
    cin >> a >> b >> c;
    int ans1 = pi * (b-a) * (b-a) * c + 3 * pi
* a * c * (b-a)+ 3 * pi * a * a * c;
    ans1 /= 12;

    cout << ans1 << endl;;
}
```
## 检验

接下来要做的就是实践了！由于人在老家，而且没带尺啥的，所以我就只好手动算了。

> 由于环境过于恶劣，且网上给出的 $c$ 值均是垂直于桌面的，所以大家看到什么几十毫升的误差也很正常，为了测验准确，我会在回上海以后重写“检验”部分。

我就直接应用百度知道上的参数了：

![1696138306772.png](https://img1.imgtp.com/2023/10/01/aFlI3dqj.png)

我们看第一个样例，将 $a=52,b=75,c=85$ 代入程序：

```
rainwang@LAPTOP-UFJO09O3:~$ g++ a.cpp
rainwang@LAPTOP-UFJO09O3:~$ ./a.out
52 75 85
271993
rainwang@LAPTOP-UFJO09O3:~$
```
答案是 $271993$，单位是 $\mathrm{cc}$，所以转换成毫升要除以 $1000$，得到 $271 \mathrm{ml}$，与提供数据差距 $50\mathrm{ml}$，考虑到一些原因，误差接受。

第三个样例过程就不展示了，答案是 $102.976\mathrm{ml}$，与答案相差 $20\mathrm{ml}$，也能接受。

## 总结

本人数学学渣，对微积分只有浅薄的认识，若本文有误，欢迎发我邮件 `Rainwang_20220102@163.com` 进行指出。